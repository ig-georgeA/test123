@page "/grid_and_tree_grid"
@using NorthwindAPIv2
@using Models.NorthwindAPIv2
@inject INorthwindAPIv2Service NorthwindAPIv2Service

<div class="column-layout grid-and-tree-grid-container">
    <div class="row-layout group">
        <IgbGrid Data="@_northwindAPIv2CustomerDto" PrimaryKey="CustomerId" DisplayDensity="DisplayDensity.Cosy" RowSelection="GridSelectionMode.Multiple" RowEditable="true" Moving="true" AllowFiltering="true" FilterMode="FilterMode.ExcelStyleFilter" AutoGenerate="false" class="ig-typography list" grid_and_tree_grid-scope>
            <IgbGridToolbar>
                <IgbGridToolbarActions>
                    <IgbGridToolbarPinning></IgbGridToolbarPinning>
                    <IgbGridToolbarHiding></IgbGridToolbarHiding>
                </IgbGridToolbarActions>
                <IgbGridToolbarTitle>Excel style filtering</IgbGridToolbarTitle>
            </IgbGridToolbar>
            <IgbColumn Field="CustomerId" DataType="GridColumnDataType.String" Header="customerId" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="CompanyName" DataType="GridColumnDataType.String" Header="companyName" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="ContactName" DataType="GridColumnDataType.String" Header="contactName" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="ContactTitle" DataType="GridColumnDataType.String" Header="contactTitle" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Street" DataType="GridColumnDataType.String" Header="address street" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.City" DataType="GridColumnDataType.String" Header="address city" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Region" DataType="GridColumnDataType.String" Header="address region" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.PostalCode" DataType="GridColumnDataType.String" Header="address postalCode" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Country" DataType="GridColumnDataType.String" Header="address country" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Phone" DataType="GridColumnDataType.String" Header="address phone" Groupable="true" Sortable="true" Resizable="true" Selectable="false"></IgbColumn>
            <IgbPaginator>true</IgbPaginator>
        </IgbGrid>
        <IgbTreeGrid Data="@_northwindAPIv2EmployeeDto" PrimaryKey="EmployeeId" ForeignKey="ReportsTo" DisplayDensity="DisplayDensity.Cosy" AllowFiltering="true" FilterMode="FilterMode.QuickFilter" AutoGenerate="false" class="ig-typography list" grid_and_tree_grid-scope>
            <IgbGridToolbar>
                <IgbGridToolbarTitle>Tree grid</IgbGridToolbarTitle>
            </IgbGridToolbar>
            <IgbColumn Field="LastName" DataType="GridColumnDataType.String" Header="lastName" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="FirstName" DataType="GridColumnDataType.String" Header="firstName" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Title" DataType="GridColumnDataType.String" Header="title" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="TitleOfCourtesy" DataType="GridColumnDataType.String" Header="titleOfCourtesy" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="BirthDate" DataType="GridColumnDataType.String" Header="birthDate" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="HireDate" DataType="GridColumnDataType.String" Header="hireDate" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="AddressId" DataType="GridColumnDataType.String" Header="addressId" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Street" DataType="GridColumnDataType.String" Header="address street" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.City" DataType="GridColumnDataType.String" Header="address city" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Region" DataType="GridColumnDataType.String" Header="address region" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.PostalCode" DataType="GridColumnDataType.String" Header="address postalCode" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Country" DataType="GridColumnDataType.String" Header="address country" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Address.Phone" DataType="GridColumnDataType.String" Header="address phone" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="Notes" DataType="GridColumnDataType.String" Header="notes" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="AvatarUrl" DataType="GridColumnDataType.String" Header="avatarUrl" Sortable="true" Selectable="false"></IgbColumn>
            <IgbColumn Field="ReportsTo" DataType="GridColumnDataType.Number" Header="reportsTo" Sortable="true" Selectable="false"></IgbColumn>
        </IgbTreeGrid>
    </div>
</div>

@code {
    private List<CustomerDto> _northwindAPIv2CustomerDto = new();
    private List<EmployeeDto> _northwindAPIv2EmployeeDto = new();

    protected override async Task OnInitializedAsync()
    {
        _northwindAPIv2CustomerDto = await NorthwindAPIv2Service.GetCustomerDtoList();
        _northwindAPIv2EmployeeDto = await NorthwindAPIv2Service.GetEmployeeDtoList();

        await base.OnInitializedAsync();
    }
}
